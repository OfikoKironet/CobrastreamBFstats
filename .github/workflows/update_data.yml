name: Aktualizace dat z API

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  fetch-and-update:
    # Pou쬴jeme v캩t코칤 stroj, proto쬰 Playwright je n치ro캜n캩j코칤
    runs-on: ubuntu-latest
    steps:
    
    # 1. Checkout k칩du
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }} 

    # 2. Nastaven칤 Pythonu
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x' 

    # 3. Instalace z치vislost칤 Pythonu (requests, playwright)
    - name: Install Python dependencies
      run: pip install -r requirements.txt
      
    # 4. *** NOV칗 KROK: Instalace Playwright prohl칤쬰캜콢 ***
    - name: Install Playwright browsers
      run: playwright install chromium
      
    # 5. Spu코t캩n칤 stahovac칤ho skriptu
    - name: Run data fetching script (using Playwright)
      run: python fetch_data.py

    # 6. Commit a push zm캩n
    - name: Commit and push changes
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: '游뱄 Automatick치 aktualizace dat z API (Playwright)'
        files: 'data.json'
