name: Aktualizace dat z API

on:
  # Spust√≠ se dennƒõ v 0:00 UTC
  schedule:
    - cron: '0 0 * * *'
  # Umo≈æn√≠ ruƒçn√≠ spu≈°tƒõn√≠ z GitHub Actions z√°lo≈æky
  workflow_dispatch:

jobs:
  fetch-and-update:
    runs-on: ubuntu-latest
    steps:
    
    # 1. Checkout k√≥du
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        # Pot≈ôebn√© pro commit, nastaven√≠ tokenu
        token: ${{ secrets.GITHUB_TOKEN }} 

    # 2. Nastaven√≠ Pythonu
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x' 

    # 3. Instalace z√°vislost√≠
    - name: Install dependencies
      run: pip install -r requirements.txt

    # 4. Spu≈°tƒõn√≠ stahovac√≠ho skriptu
    - name: Run data fetching script
      run: python fetch_data.py

    # 5. Commit a push zmƒõn
    # Tato akce za≈ô√≠d√≠, ≈æe se novƒõ sta≈æen√Ω data.json soubor
    # ulo≈æ√≠ do repozit√°≈ôe, co≈æ aktualizuje i GitHub Pages.
    - name: Commit and push changes
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: 'ü§ñ Automatick√° aktualizace dat z API'
        # Soubory, kter√© se maj√≠ commitnout
        files: 'data.json'
